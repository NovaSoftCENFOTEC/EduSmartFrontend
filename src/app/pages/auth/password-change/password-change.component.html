<app-topbar></app-topbar>
<div
  class="container min-vh-100 d-flex align-items-center justify-content-center py-4"
>
  <main class="d-flex flex-column align-items-center justify-content-center">
    <div
      class="login-card p-4 shadow rounded-4"
      style="max-width: 600px; width: 100%; background: #fff"
    >
      <form
        (ngSubmit)="handlePasswordChange($event)"
        autocomplete="off"
        #frm="ngForm"
      >
        <h2 class="fw-bold mb-2 text-center" style="font-size: 2.2rem">
          Cambiar Contraseña Temporal
        </h2>
        <p class="mb-4 text-center" style="color: #555; font-size: 1.1rem">
          Ingrese su nueva contraseña.
        </p>

        <div class="mb-3">
          <label for="password" class="form-label fw-semibold"
            >Nueva Contraseña</label
          >
          <div class="input-group">
            <span class="input-group-text bg-white border-end-0">
              <i class="bi bi-lock"></i>
            </span>
            <input
              #password="ngModel"
              [type]="showPassword ? 'text' : 'password'"
              class="form-control border-start-0"
              id="password"
              name="password"
              placeholder="Nueva Contraseña"
              [(ngModel)]="recoveryForm.password"
              required
              minlength="8"
              style="font-size: 1.15rem"
            />
            <button
              type="button"
              class="input-group-text bg-white border-start-0"
              (click)="showPassword = !showPassword"
              tabindex="-1"
            >
              <i
                class="bi"
                [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"
              ></i>
            </button>
          </div>
          @if (password.invalid && (password.dirty || password.touched)) {
          <div class="text-danger mt-1" style="font-size: 0.95rem">
            @if (password.errors?.['required']) {
            <div>La contraseña es obligatoria.</div>
            } @if (password.errors?.['minlength']) {
            <div>Contraseña debe tener al menos 8 caracteres.</div>
            }
          </div>
          }
        </div>

        <div class="mb-3">
          <label for="confirmPassword" class="form-label fw-semibold"
            >Confirmar Contraseña</label
          >
          <div class="input-group">
            <span class="input-group-text bg-white border-end-0">
              <i class="bi bi-lock"></i>
            </span>
            <input
              #confirmPassword="ngModel"
              [type]="showPassword ? 'text' : 'password'"
              class="form-control border-start-0"
              id="confirmPassword"
              name="confirmPassword"
              placeholder="Confirmar Contraseña"
              [(ngModel)]="recoveryForm.confirmPassword"
              required
              style="font-size: 1.15rem"
            />
            <button
              type="button"
              class="input-group-text bg-white border-start-0"
              (click)="showPassword = !showPassword"
              tabindex="-1"
            >
              <i
                class="bi"
                [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"
              ></i>
            </button>
          </div>
          @if (confirmPassword.invalid && (confirmPassword.dirty ||
          confirmPassword.touched)) {
          <div class="text-danger mt-1" style="font-size: 0.95rem">
            @if (confirmPassword.errors?.['required']) {
            <div>La confirmación de contraseña es obligatoria.</div>
            }
          </div>
          }
        </div>

        <button
          class="btn btn-primary w-100 py-2 mb-3"
          style="font-size: 1.2rem; font-weight: 700"
          type="submit"
          [disabled]="frm.invalid"
        >
          Cambiar Contraseña
        </button>
      </form>
    </div>
  </main>
</div>
<app-footer></app-footer>
